<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>流量男明星猜猜看</title>
    <style>
        :root {
            color-scheme: light dark;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Helvetica Neue", "PingFang SC", "Microsoft YaHei", sans-serif;
            background: linear-gradient(135deg, #4c6ef5 0%, #d6336c 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px 16px;
            color: #1c1c28;
        }

        .card {
            width: min(680px, 100%);
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(12px);
            border-radius: 28px;
            box-shadow: 0 32px 80px rgba(0, 0, 0, 0.2);
            padding: 42px 36px;
            display: flex;
            flex-direction: column;
            gap: 26px;
        }

        .secondary-action {
            border: none;
            background: rgba(24, 41, 85, 0.12);
            color: #182955;
            padding: 10px 22px;
            border-radius: 999px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
            box-shadow: 0 12px 24px rgba(24, 41, 85, 0.15);
        }

        .secondary-action:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 16px 28px rgba(24, 41, 85, 0.18);
            background: rgba(24, 41, 85, 0.2);
        }

        .secondary-action:disabled {
            cursor: default;
            opacity: 0.6;
            transform: none;
            box-shadow: none;
        }

        .mode-toggle {
            min-width: 132px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 22px;
            font-weight: 600;
        }

        .mode-toggle[aria-pressed="true"] {
            background: linear-gradient(135deg, #4263eb, #9775fa);
            color: #fff;
            box-shadow: 0 16px 32px rgba(66, 99, 235, 0.35);
        }

        .rating-hud {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .rating-chip {
            background: rgba(66, 99, 235, 0.12);
            color: #1c1c28;
            padding: 6px 16px;
            border-radius: 999px;
            font-size: 14px;
            font-weight: 600;
        }

        .rating-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .hidden {
            display: none !important;
        }

        h1 {
            font-size: clamp(28px, 4vw, 38px);
            font-weight: 700;
            text-align: center;
            color: #212529;
            letter-spacing: 2px;
        }

        p.description {
            text-align: center;
            color: #495057;
            line-height: 1.68;
            font-size: 16px;
        }

        .controls {
            display: flex;
            justify-content: center;
        }

        button.main-action {
            border: none;
            background: linear-gradient(135deg, #4263eb, #9775fa);
            color: #fff;
            padding: 14px 34px;
            border-radius: 999px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
            box-shadow: 0 16px 32px rgba(66, 99, 235, 0.35);
        }

        button.main-action:disabled {
            cursor: wait;
            opacity: 0.7;
            box-shadow: none;
        }

        button.main-action:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 36px rgba(66, 99, 235, 0.45);
        }

        .photo-frame {
            position: relative;
            width: 100%;
            padding-top: 66%;
            border-radius: 22px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.08);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo-credit {
            min-height: 20px;
            text-align: center;
            font-size: 13px;
            color: #6c757d;
        }

        .photo-credit a {
            color: inherit;
            text-decoration: underline;
        }

        .photo-frame img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            background: #000;
            opacity: 0;
            transition: opacity 0.35s ease;
        }

        .photo-frame img.visible {
            opacity: 1;
        }

        .photo-placeholder {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #868e96;
            font-size: 16px;
            line-height: 1.6;
            padding: 16px;
            text-align: center;
        }

        .loading-overlay {
            position: absolute;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.8);
        }

        .loading-overlay.active {
            display: flex;
        }

        .spinner {
            width: 52px;
            height: 52px;
            border-radius: 50%;
            border: 6px solid rgba(66, 99, 235, 0.2);
            border-top-color: #4263eb;
            animation: spin 0.9s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .guess-panel {
            display: grid;
            gap: 12px;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        }

        .option-button {
            border: none;
            background: #182955;
            color: #fff;
            padding: 12px 18px;
            border-radius: 18px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease, background 0.2s ease;
            box-shadow: 0 12px 24px rgba(24, 41, 85, 0.3);
        }

        .option-button:disabled {
            cursor: not-allowed;
            opacity: 0.65;
            box-shadow: none;
        }

        .option-button:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 18px 30px rgba(24, 41, 85, 0.4);
        }

        .option-button.correct {
            background: linear-gradient(135deg, #2f9e44, #51cf66);
            color: #fff;
            box-shadow: 0 16px 32px rgba(47, 158, 68, 0.35);
        }

        .option-button.incorrect {
            background: linear-gradient(135deg, #f03e3e, #ff8787);
            color: #fff;
            box-shadow: none;
        }

        .feedback {
            min-height: 24px;
            text-align: center;
            font-size: 16px;
            font-weight: 500;
        }

        .feedback.success {
            color: #2b8a3e;
        }

        .feedback.error {
            color: #c92a2a;
        }

        .hint {
            text-align: center;
            color: #868e96;
            font-size: 14px;
            line-height: 1.6;
        }

        @media (max-width: 520px) {
            .card {
                padding: 30px 20px;
                border-radius: 22px;
                gap: 20px;
            }

            .difficulty-switcher {
                flex-direction: column;
            }

            .secondary-action,
            .mode-toggle {
                width: 100%;
                text-align: center;
            }

            .option-button {
                font-size: 15px;
                padding: 12px 14px;
            }
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>流量男明星猜猜看</h1>
        <p class="description" id="modeDescription">仅供娱乐</p>
        <div class="controls" aria-live="polite">
            <button id="ratingToggle" class="secondary-action mode-toggle" aria-pressed="false">答题模式：关</button>
        </div>
        <div id="ratingHud" class="rating-hud hidden">
            <span class="rating-chip" id="ratingProgress">第 1 / 10 题</span>
            <span class="rating-chip" id="ratingScore">正确 0 题</span>
        </div>
        <div class="controls" id="mainControls">
            <button id="startBtn" class="main-action">开始</button>
        </div>
        <div class="rating-controls hidden" id="ratingControls">
            <button id="nextQuestionBtn" class="main-action">下一题</button>
            <button id="exitRatingBtn" class="secondary-action">退出答题</button>
        </div>
        <div class="photo-frame">
            <div id="placeholder" class="photo-placeholder">还没有加载照片，点击“开始”试试运气～</div>
            <img id="starImage" alt="流量男明星照片" loading="lazy">
            <div id="loading" class="loading-overlay">
                <div class="spinner" aria-hidden="true"></div>
            </div>
        </div>
        <div id="photoCredit" class="photo-credit" aria-live="polite">仅供娱乐</div>
        <div id="guessPanel" class="guess-panel" aria-label="候选明星名单"></div>
        <div id="feedback" class="feedback"></div>
        <p id="hint" class="hint">从四个选项中选出你认为正确的名字吧！</p>
    </div>

    <script>
// 本地素材映射：在 assets/people 中新增图片后，把名字、路径和出处登记在这里。
const CELEBRITY_ASSETS = {
    '易烊千玺': {
        path: 'assets/people/placeholder.svg',
        sourceLabel: '示例素材：维基百科',
        sourceUrl: 'https://zh.wikipedia.org/wiki/%E6%98%93%E7%83%8A%E5%8D%83%E7%93%BA',
    },
    '王俊凯': {
        path: 'assets/people/placeholder.svg',
        sourceLabel: '示例素材：维基百科',
        sourceUrl: 'https://zh.wikipedia.org/wiki/%E7%8E%8B%E4%BF%8A%E5%87%AF',
    },
    '王源': {
        path: 'assets/people/placeholder.svg',
        sourceLabel: '示例素材：维基百科',
        sourceUrl: 'https://zh.wikipedia.org/wiki/%E7%8E%8B%E6%BA%90',
    },
    '王一博': {
        path: 'assets/people/placeholder.svg',
        sourceLabel: '示例素材：维基百科',
        sourceUrl: 'https://zh.wikipedia.org/wiki/%E7%8E%8B%E4%B8%80%E5%8D%9A',
    },
    '肖战': {
        path: 'assets/people/placeholder.svg',
        sourceLabel: '示例素材：维基百科',
        sourceUrl: 'https://zh.wikipedia.org/wiki/%E8%82%96%E6%88%98',
    },
    '蔡徐坤': {
        path: 'assets/people/placeholder.svg',
        sourceLabel: '示例素材：维基百科',
        sourceUrl: 'https://zh.wikipedia.org/wiki/%E8%94%A1%E5%BE%90%E5%9D%A4',
    },
};

const CELEBRITY_POOLS = {
    normal: [
    {
        "displayName": "易烊千玺",
        "wiki": { "lang": "zh", "title": "易烊千玺" },
        "answers": ["易烊千玺", "Jackson Yee", "Yiyang Qianxi"]
    },
    {
        "displayName": "王俊凯",
        "wiki": { "lang": "zh", "title": "王俊凯" },
        "answers": ["王俊凯", "Karry Wang", "Wang Junkai"]
    },
    {
        "displayName": "王源",
        "wiki": { "lang": "zh", "title": "王源" },
        "answers": ["王源", "Roy Wang", "Wang Yuan"]
    },
    {
        "displayName": "王一博",
        "wiki": { "lang": "zh", "title": "王一博" },
        "answers": ["王一博", "Wang Yibo"]
    },
    {
        "displayName": "肖战",
        "wiki": { "lang": "zh", "title": "肖战" },
        "answers": ["肖战", "Xiao Zhan", "Sean Xiao"]
    },
    {
        "displayName": "蔡徐坤",
        "wiki": { "lang": "zh", "title": "蔡徐坤" },
        "answers": ["蔡徐坤", "Cai Xukun", "Kun"]
    },
    {
        "displayName": "张艺兴",
        "wiki": { "lang": "zh", "title": "张艺兴" },
        "answers": ["张艺兴", "Lay Zhang", "Zhang Yixing", "Lay"]
    },
    {
        "displayName": "黄子韬",
        "wiki": { "lang": "zh", "title": "黄子韬" },
        "answers": ["黄子韬", "Huang Zitao", "Z.Tao", "Tao"]
    },
    {
        "displayName": "吴亦凡",
        "wiki": { "lang": "zh", "title": "吴亦凡" },
        "answers": ["吴亦凡", "Kris Wu", "Wu Yifan"]
    },
    {
        "displayName": "鹿晗",
        "wiki": { "lang": "zh", "title": "鹿晗" },
        "answers": ["鹿晗", "Lu Han", "Luhan"]
    },
    {
        "displayName": "陈伟霆",
        "wiki": { "lang": "zh", "title": "陈伟霆" },
        "answers": ["陈伟霆", "William Chan"]
    },
    {
        "displayName": "邓伦",
        "wiki": { "lang": "zh", "title": "邓伦" },
        "answers": ["邓伦", "Deng Lun"]
    },
    {
        "displayName": "李现",
        "wiki": { "lang": "zh", "title": "李现" },
        "answers": ["李现", "Li Xian"]
    },
    {
        "displayName": "朱一龙",
        "wiki": { "lang": "zh", "title": "朱一龙" },
        "answers": ["朱一龙", "Zhu Yilong"]
    },
    {
        "displayName": "罗云熙",
        "wiki": { "lang": "zh", "title": "罗云熙" },
        "answers": ["罗云熙", "Luo Yunxi", "Leo Luo"]
    },
    {
        "displayName": "任嘉伦",
        "wiki": { "lang": "zh", "title": "任嘉伦" },
        "answers": ["任嘉伦", "Ren Jialun", "Allen Ren"]
    },
    {
        "displayName": "杨洋",
        "wiki": { "lang": "zh", "title": "杨洋" },
        "answers": ["杨洋", "Yang Yang"]
    },
    {
        "displayName": "白敬亭",
        "wiki": { "lang": "zh", "title": "白敬亭" },
        "answers": ["白敬亭", "Bai Jingting"]
    },
    {
        "displayName": "宋威龙",
        "wiki": { "lang": "zh", "title": "宋威龙" },
        "answers": ["宋威龙", "Song Weilong"]
    },
    {
        "displayName": "宋亚轩",
        "wiki": { "lang": "zh", "title": "宋亚轩" },
        "answers": ["宋亚轩", "Song Yaxuan"]
    },
    {
        "displayName": "张真源",
        "wiki": { "lang": "zh", "title": "张真源" },
        "answers": ["张真源", "Zhang Zhenyuan"]
    },
    {
        "displayName": "严浩翔",
        "wiki": { "lang": "zh", "title": "严浩翔" },
        "answers": ["严浩翔", "Yan Haoxiang"]
    },
    {
        "displayName": "贺峻霖",
        "wiki": { "lang": "zh", "title": "贺峻霖" },
        "answers": ["贺峻霖", "He Junlin"]
    },
    {
        "displayName": "刘耀文",
        "wiki": { "lang": "zh", "title": "刘耀文" },
        "answers": ["刘耀文", "Liu Yaowen"]
    },
    {
        "displayName": "丁程鑫",
        "wiki": { "lang": "zh", "title": "丁程鑫" },
        "answers": ["丁程鑫", "Ding Chengxin"]
    },
    {
        "displayName": "马嘉祺",
        "wiki": { "lang": "zh", "title": "马嘉祺" },
        "answers": ["马嘉祺", "Ma Jiaqi"]
    },
    {
        "displayName": "张凌赫",
        "wiki": { "lang": "zh", "title": "张凌赫" },
        "answers": ["张凌赫", "Zhang Linghe"]
    },
    {
        "displayName": "王鹤棣",
        "wiki": { "lang": "zh", "title": "王鹤棣" },
        "answers": ["王鹤棣", "Wang Hedi", "Dylan Wang"]
    },
    {
        "displayName": "陈飞宇",
        "wiki": { "lang": "zh", "title": "陈飞宇" },
        "answers": ["陈飞宇", "Chen Feiyu", "Arthur Chen"]
    },
    {
        "displayName": "胡一天",
        "wiki": { "lang": "zh", "title": "胡一天" },
        "answers": ["胡一天", "Hu Yitian"]
    },
    {
        "displayName": "华晨宇",
        "wiki": { "lang": "zh", "title": "华晨宇" },
        "answers": ["华晨宇", "Hua Chenyu"]
    },
    {
        "displayName": "张哲瀚",
        "wiki": { "lang": "zh", "title": "张哲瀚" },
        "answers": ["张哲瀚", "Zhang Zhehan"]
    },
    {
        "displayName": "龚俊",
        "wiki": { "lang": "zh", "title": "龚俊" },
        "answers": ["龚俊", "Gong Jun", "Simon Gong"]
    },
    {
        "displayName": "范丞丞",
        "wiki": { "lang": "zh", "title": "范丞丞" },
        "answers": ["范丞丞", "Fan Chengcheng"]
    },
    {
        "displayName": "何洛洛",
        "wiki": { "lang": "zh", "title": "何洛洛" },
        "answers": ["何洛洛", "He Luoluo", "Luo Luo"]
    },
    {
        "displayName": "夏之光",
        "wiki": { "lang": "zh", "title": "夏之光" },
        "answers": ["夏之光", "Xia Zhiguang"]
    },
    {
        "displayName": "黄明昊",
        "wiki": { "lang": "zh", "title": "黄明昊" },
        "answers": ["黄明昊", "Justin Huang", "Huang Minghao"]
    },
    {
        "displayName": "林彦俊",
        "wiki": { "lang": "zh", "title": "林彦俊" },
        "answers": ["林彦俊", "Lin Yanjun"]
    },
    {
        "displayName": "卜凡",
        "wiki": { "lang": "zh", "title": "卜凡" },
        "answers": ["卜凡", "Bo Fan"]
    },
    {
        "displayName": "朱正廷",
        "wiki": { "lang": "zh", "title": "朱正廷" },
        "answers": ["朱正廷", "Zhu Zhengting"]
    },
    {
        "displayName": "李汶翰",
        "wiki": { "lang": "zh", "title": "李汶翰" },
        "answers": ["李汶翰", "Li Wenhan"]
    },
    {
        "displayName": "毕雯珺",
        "wiki": { "lang": "zh", "title": "毕雯珺" },
        "answers": ["毕雯珺", "Bi Wenjun"]
    },
    {
        "displayName": "郑锐彬",
        "wiki": { "lang": "zh", "title": "郑锐彬" },
        "answers": ["郑锐彬", "Zheng Ruibin"]
    },
    {
        "displayName": "周震南",
        "wiki": { "lang": "zh", "title": "周震南" },
        "answers": ["周震南", "Zhou Zhennan"]
    },
    {
        "displayName": "焉栩嘉",
        "wiki": { "lang": "zh", "title": "焉栩嘉" },
        "answers": ["焉栩嘉", "Yan Xujia"]
    },
    {
        "displayName": "刘宇宁",
        "wiki": { "lang": "zh", "title": "刘宇宁" },
        "answers": ["刘宇宁", "Liu Yuning"]
    },
    {
        "displayName": "周柯宇",
        "wiki": { "lang": "zh", "title": "周柯宇" },
        "answers": ["周柯宇", "Zhou Keyu"]
    },
    {
        "displayName": "甘望星",
        "wiki": { "lang": "zh", "title": "甘望星" },
        "answers": ["甘望星", "Gan Wangxing"]
    },
    {
        "displayName": "尹浩宇",
        "wiki": { "lang": "zh", "title": "尹浩宇" },
        "answers": ["尹浩宇", "Yin Haoyu", "Tony Yu"]
    },
    {
        "displayName": "张嘉元",
        "wiki": { "lang": "zh", "title": "张嘉元" },
        "answers": ["张嘉元", "Zhang Jiayuan"]
    },
    {
        "displayName": "高卿尘",
        "wiki": { "lang": "zh", "title": "高卿尘" },
        "answers": ["高卿尘", "Gao Qingchen", "Nine"]
    },
    {
        "displayName": "陈哲远",
        "wiki": { "lang": "zh", "title": "陈哲远" },
        "answers": ["陈哲远", "Chen Zheyuan"]
    },
    {
        "displayName": "陈立农",
        "wiki": { "lang": "zh", "title": "陈立农" },
        "answers": ["陈立农", "Chen Linong"]
    },
    {
        "displayName": "王安宇",
        "wiki": { "lang": "zh", "title": "王安宇" },
        "answers": ["王安宇", "Wang Anyu"]
    },
    {
        "displayName": "王大陆",
        "wiki": { "lang": "zh", "title": "王大陆" },
        "answers": ["王大陆", "Darren Wang", "Wang Talu"]
    },
    {
        "displayName": "许凯",
        "wiki": { "lang": "zh", "title": "许凯" },
        "answers": ["许凯", "Xu Kai"]
    },
    {
        "displayName": "陈星旭",
        "wiki": { "lang": "zh", "title": "陈星旭" },
        "answers": ["陈星旭", "Chen Xingxu"]
    },
    {
        "displayName": "李易峰",
        "wiki": { "lang": "zh", "title": "李易峰" },
        "answers": ["李易峰", "Li Yifeng"]
    },
    {
        "displayName": "霍建华",
        "wiki": { "lang": "zh", "title": "霍建华" },
        "answers": ["霍建华", "Wallace Huo"]
    },
    {
        "displayName": "张翰",
        "wiki": { "lang": "zh", "title": "张翰" },
        "answers": ["张翰", "Zhang Han"]
    },
    {
        "displayName": "张若昀",
        "wiki": { "lang": "zh", "title": "张若昀" },
        "answers": ["张若昀", "Zhang Ruoyun"]
    },
    {
        "displayName": "井柏然",
        "wiki": { "lang": "zh", "title": "井柏然" },
        "answers": ["井柏然", "Jing Boran"]
    },
    {
        "displayName": "彭昱畅",
        "wiki": { "lang": "zh", "title": "彭昱畅" },
        "answers": ["彭昱畅", "Peng Yuchang"]
    },
    {
        "displayName": "吴磊",
        "wiki": { "lang": "zh", "title": "吴磊_(演员)" },
        "answers": ["吴磊", "Leo Wu", "Wu Lei"]
    },
    {
        "displayName": "刘昊然",
        "wiki": { "lang": "zh", "title": "刘昊然" },
        "answers": ["刘昊然", "Liu Haoran", "Turbo Liu"]
    },
    {
        "displayName": "王凯",
        "wiki": { "lang": "en", "title": "Wang_Kai_(actor)" },
        "answers": ["王凯", "Wang Kai"]
    },
    {
        "displayName": "张新成",
        "wiki": { "lang": "zh", "title": "张新成" },
        "answers": ["张新成", "Steven Zhang", "Zhang Xincheng"]
    },
    {
        "displayName": "白宇",
        "wiki": { "lang": "zh", "title": "白宇_(演员)" },
        "answers": ["白宇", "Bai Yu"]
    },
    {
        "displayName": "许魏洲",
        "wiki": { "lang": "zh", "title": "许魏洲" },
        "answers": ["许魏洲", "Timmy Xu", "Xu Weizhou"]
    },
    {
        "displayName": "吴尊",
        "wiki": { "lang": "zh", "title": "吳尊" },
        "answers": ["吴尊", "Wu Chun"]
    },
    {
        "displayName": "炎亚纶",
        "wiki": { "lang": "zh", "title": "炎亞綸" },
        "answers": ["炎亚纶", "Aaron Yan"]
    },
    {
        "displayName": "汪东城",
        "wiki": { "lang": "zh", "title": "汪东城" },
        "answers": ["汪东城", "Jiro Wang"]
    },
    {
        "displayName": "丁禹兮",
        "wiki": { "lang": "zh", "title": "丁禹兮" },
        "answers": ["丁禹兮", "Ding Yuxi"]
    },
    {
        "displayName": "侯明昊",
        "wiki": { "lang": "zh", "title": "侯明昊" },
        "answers": ["侯明昊", "Neo Hou"]
    },
    {
        "displayName": "郭麒麟",
        "wiki": { "lang": "zh", "title": "郭麒麟" },
        "answers": ["郭麒麟", "Guo Qilin"]
    },
    {
        "displayName": "郭俊辰",
        "wiki": { "lang": "zh", "title": "郭俊辰" },
        "answers": ["郭俊辰", "Guo Junchen"]
    },
    {
        "displayName": "邢昭林",
        "wiki": { "lang": "zh", "title": "邢昭林" },
        "answers": ["邢昭林", "Xing Zhaolin"]
    },
    {
        "displayName": "郑业成",
        "wiki": { "lang": "zh", "title": "郑业成" },
        "answers": ["郑业成", "Zheng Yecheng"]
    },
    {
        "displayName": "李宏毅",
        "wiki": { "lang": "zh", "title": "李宏毅" },
        "answers": ["李宏毅", "Li Hongyi"]
    },
    {
        "displayName": "韩东君",
        "wiki": { "lang": "zh", "title": "韩东君" },
        "answers": ["韩东君", "Elvis Han", "Han Dongjun"]
    },
    {
        "displayName": "刘学义",
        "wiki": { "lang": "zh", "title": "刘学义" },
        "answers": ["刘学义", "Liu Xueyi"]
    },
    {
        "displayName": "陈若轩",
        "wiki": { "lang": "zh", "title": "陈若轩" },
        "answers": ["陈若轩", "Chen Ruoxuan"]
    },
    {
        "displayName": "盛一伦",
        "wiki": { "lang": "zh", "title": "盛一伦" },
        "answers": ["盛一伦", "Sheng Yilun", "Peter Sheng"]
    },
    {
        "displayName": "王嘉尔",
        "wiki": { "lang": "zh", "title": "王嘉尔" },
        "answers": ["王嘉尔", "Jackson Wang"]
    },
    {
        "displayName": "王子异",
        "wiki": { "lang": "zh", "title": "王子异" },
        "answers": ["王子异", "Wang Ziyi"]
    },
    {
        "displayName": "魏大勋",
        "wiki": { "lang": "zh", "title": "魏大勋" },
        "answers": ["魏大勋", "Wei Daxun"]
    },
    {
        "displayName": "张云龙",
        "wiki": { "lang": "zh", "title": "张云龙" },
        "answers": ["张云龙", "Zhang Yunlong", "Leon Zhang"]
    },
    {
        "displayName": "魏哲鸣",
        "wiki": { "lang": "zh", "title": "魏哲鸣" },
        "answers": ["魏哲鸣", "Wei Zheming", "Miles Wei"]
    },
    {
        "displayName": "胡先煦",
        "wiki": { "lang": "zh", "title": "胡先煦" },
        "answers": ["胡先煦", "Hu Xianxu"]
    },
    {
        "displayName": "熊梓淇",
        "wiki": { "lang": "zh", "title": "熊梓淇" },
        "answers": ["熊梓淇", "Bear Shaw", "Xiong Ziqi"]
    },
    {
        "displayName": "曾舜晞",
        "wiki": { "lang": "zh", "title": "曾舜晞" },
        "answers": ["曾舜晞", "Joseph Zeng", "Zeng Shunxi"]
    },
    {
        "displayName": "宋继扬",
        "wiki": { "lang": "zh", "title": "宋继扬" },
        "answers": ["宋继扬", "Song Jiyang"]
    },
    {
        "displayName": "张晚意",
        "wiki": { "lang": "zh", "title": "张晚意" },
        "answers": ["张晚意", "Zhang Wanyi"]
    },
    {
        "displayName": "王彦霖",
        "wiki": { "lang": "zh", "title": "王彦霖" },
        "answers": ["王彦霖", "Wang Yanlin"]
    },
    {
        "displayName": "张铭恩",
        "wiki": { "lang": "zh", "title": "张铭恩" },
        "answers": ["张铭恩", "Zhang Mingen"]
    },
    {
        "displayName": "杨玏",
        "wiki": { "lang": "zh", "title": "杨玏" },
        "answers": ["杨玏", "Yang Le"]
    },
    {
        "displayName": "俞灏明",
        "wiki": { "lang": "zh", "title": "俞灏明" },
        "answers": ["俞灏明", "Yu Haoming"]
    },
    {
        "displayName": "梁靖康",
        "wiki": { "lang": "zh", "title": "梁靖康" },
        "answers": ["梁靖康", "Liang Jingkang", "Connor Leong"]
    },
    {
        "displayName": "黄俊捷",
        "wiki": { "lang": "zh", "title": "黄俊捷" },
        "answers": ["黄俊捷", "Huang Junjie"]
    },
    {
        "displayName": "张耀",
        "wiki": { "lang": "zh", "title": "张耀_(演员)" },
        "answers": ["张耀", "Zhang Yao"]
    },
    {
        "displayName": "金泰亨",
        "wiki": { "lang": "zh", "title": "金泰亨" },
        "answers": ["金泰亨", "Kim Taehyung", "V"]
    },
    {
        "displayName": "田柾国",
        "wiki": { "lang": "zh", "title": "田柾國" },
        "answers": ["田柾国", "Jeon Jungkook", "Jungkook"]
    },
    {
        "displayName": "朴智旻",
        "wiki": { "lang": "zh", "title": "朴智旻" },
        "answers": ["朴智旻", "Park Jimin", "Jimin"]
    },
    {
        "displayName": "朴灿烈",
        "wiki": { "lang": "zh", "title": "朴燦烈" },
        "answers": ["朴灿烈", "Park Chanyeol", "Chanyeol"]
    },
    {
        "displayName": "吴世勋",
        "wiki": { "lang": "zh", "title": "Sehun" },
        "answers": ["吴世勋", "Oh Sehun", "Sehun"]
    },
    {
        "displayName": "黄旭熙",
        "wiki": { "lang": "zh", "title": "黃旭熙" },
        "answers": ["黄旭熙", "Huang Xuxi", "Lucas"]
    },
    {
        "displayName": "董思成",
        "wiki": { "lang": "zh", "title": "董思成" },
        "answers": ["董思成", "Dong Sicheng", "Winwin"]
    },
    {
        "displayName": "钱锟",
        "wiki": { "lang": "zh", "title": "錢錕" },
        "answers": ["钱锟", "Qian Kun", "Kun Qian"]
    },
    {
        "displayName": "李永钦",
        "wiki": { "lang": "zh", "title": "李永钦" },
        "answers": ["李永钦", "Li Yongqin", "Ten"]
    },
    {
        "displayName": "黄仁俊",
        "wiki": { "lang": "zh", "title": "黃仁俊" },
        "answers": ["黄仁俊", "Huang Renjun", "Renjun"]
    },
    {
        "displayName": "李马克",
        "wiki": { "lang": "zh", "title": "李馬克" },
        "answers": ["李马克", "Mark Lee", "Lee Minhyung", "Mark"]
    },
    {
        "displayName": "李泰容",
        "wiki": { "lang": "zh", "title": "李泰容_(歌手)" },
        "answers": ["李泰容", "Lee Taeyong", "Taeyong"]
    },
    {
        "displayName": "车银优",
        "wiki": { "lang": "zh", "title": "車銀優" },
        "answers": ["车银优", "Cha Eunwoo", "Lee Dongmin"]
    },
    {
        "displayName": "李在玟",
        "wiki": { "lang": "zh", "title": "李在玟" },
        "answers": ["李在玟", "Lee Jaemin", "Jaemin"]
    },
    {
        "displayName": "金硕珍",
        "wiki": { "lang": "zh", "title": "金碩珍" },
        "answers": ["金硕珍", "Kim Seokjin", "Jin"]
    },
    {
        "displayName": "闵玧其",
        "wiki": { "lang": "zh", "title": "閔玧其" },
        "answers": ["闵玧其", "Min Yoongi", "Suga"]
    },
    {
        "displayName": "郑号锡",
        "wiki": { "lang": "zh", "title": "鄭號錫" },
        "answers": ["郑号锡", "Jung Hoseok", "J-Hope"]
    },
    {
        "displayName": "金南俊",
        "wiki": { "lang": "zh", "title": "金南俊" },
        "answers": ["金南俊", "Kim Namjoon", "RM"]
    }
    ],
    hard: [
        {
            "displayName": "赵磊",
            "wiki": { "lang": "zh", "title": "赵磊" },
            "answers": ["赵磊", "Zhao Lei"]
        },

        {
            "displayName": "任豪",
            "wiki": { "lang": "zh", "title": "任豪" },
            "answers": ["任豪", "Ren Hao"]
        },

        {
            "displayName": "刘也",
            "wiki": { "lang": "zh", "title": "刘也" },
            "answers": ["刘也", "Liu Ye"]
        },

        {
            "displayName": "张颜齐",
            "wiki": { "lang": "zh", "title": "张颜齐" },
            "answers": ["张颜齐", "Zhang Yanqi"]
        },

        {
            "displayName": "赵让",
            "wiki": { "lang": "zh", "title": "赵让" },
            "answers": ["赵让", "Zhao Rang"]
        },

        {
            "displayName": "夏瀚宇",
            "wiki": { "lang": "zh", "title": "夏瀚宇" },
            "answers": ["夏瀚宇", "Xia Hanyu"]
        },

        {
            "displayName": "李振宁",
            "wiki": { "lang": "zh", "title": "李振宁" },
            "answers": ["李振宁", "Li Zhenning"]
        },

        {
            "displayName": "陈宥维",
            "wiki": { "lang": "zh", "title": "陈宥维" },
            "answers": ["陈宥维", "Chen Youwei"]
        },

        {
            "displayName": "嘉羿",
            "wiki": { "lang": "zh", "title": "嘉羿" },
            "answers": ["嘉羿", "Jia Yi", "Kiwi Jia"]
        },

        {
            "displayName": "姚明明",
            "wiki": { "lang": "zh", "title": "姚明明" },
            "answers": ["姚明明", "Yao Mingming"]
        },

        {
            "displayName": "胡春杨",
            "wiki": { "lang": "zh", "title": "胡春杨" },
            "answers": ["胡春杨", "Hu Chunyang"]
        },

        {
            "displayName": "胡文煊",
            "wiki": { "lang": "zh", "title": "胡文煊" },
            "answers": ["胡文煊", "Hu Wenxuan"]
        },

        {
            "displayName": "丁泽仁",
            "wiki": { "lang": "zh", "title": "丁泽仁" },
            "answers": ["丁泽仁", "Ding Zeren"]
        },

        {
            "displayName": "王琳凯",
            "wiki": { "lang": "zh", "title": "王琳凯" },
            "answers": ["王琳凯", "Wang Linkai", "Lil Ghost", "小鬼"]
        },

        {
            "displayName": "刘宇",
            "wiki": { "lang": "zh", "title": "刘宇" },
            "answers": ["刘宇", "Liu Yu"]
        },

        {
            "displayName": "林墨",
            "wiki": { "lang": "zh", "title": "林墨" },
            "answers": ["林墨", "Lin Mo"]
        },

        {
            "displayName": "唐九洲",
            "wiki": { "lang": "zh", "title": "唐九洲" },
            "answers": ["唐九洲", "Tang Jiuzhou"]
        },

        {
            "displayName": "罗一舟",
            "wiki": { "lang": "zh", "title": "罗一舟" },
            "answers": ["罗一舟", "Luo Yizhou"]
        },

        {
            "displayName": "刘冠佑",
            "wiki": { "lang": "zh", "title": "刘冠佑" },
            "answers": ["刘冠佑", "Liu Guanyou"]
        },

        {
            "displayName": "徐炳超",
            "wiki": { "lang": "zh", "title": "徐炳超" },
            "answers": ["徐炳超", "Xu Bingchao"]
        },

        {
            "displayName": "陆定昊",
            "wiki": { "lang": "zh", "title": "陆定昊" },
            "answers": ["陆定昊", "Lu Dinghao"]
        },

        {
            "displayName": "刘彰",
            "wiki": { "lang": "zh", "title": "刘彰" },
            "answers": ["刘彰", "Liu Zhang", "AK"]
        },

        {
            "displayName": "王皓轩",
            "wiki": { "lang": "zh", "title": "王皓轩" },
            "answers": ["王皓轩", "Wang Haoxuan"]
        },

        {
            "displayName": "赵弈钦",
            "wiki": { "lang": "zh", "title": "赵弈钦" },
            "answers": ["赵弈钦", "Zhao Yiqin"]
        },

        {
            "displayName": "杨仕泽",
            "wiki": { "lang": "zh", "title": "杨仕泽" },
            "answers": ["杨仕泽", "Yang Shize"]
        },

        {
            "displayName": "林一",
            "wiki": { "lang": "zh", "title": "林一" },
            "answers": ["林一", "Lin Yi"]
        },

        {
            "displayName": "蒲熠星",
            "wiki": { "lang": "zh", "title": "蒲熠星" },
            "answers": ["蒲熠星", "Pu Yixing"]
        },

        {
            "displayName": "吴宇恒",
            "wiki": { "lang": "zh", "title": "吴宇恒" },
            "answers": ["吴宇恒", "Wu Yuheng"]
        },

        {
            "displayName": "陈牧驰",
            "wiki": { "lang": "zh", "title": "陈牧驰" },
            "answers": ["陈牧驰", "Chen Muchi"]
        },

        {
            "displayName": "于适",
            "wiki": { "lang": "zh", "title": "于适" },
            "answers": ["于适", "Yu Shi"]
        },

        {
            "displayName": "翟潇闻",
            "wiki": { "lang": "zh", "title": "翟潇闻" },
            "answers": ["翟潇闻", "Zhai Xiaowen"]
        },

        {
            "displayName": "王星越",
            "wiki": { "lang": "zh", "title": "王星越" },
            "answers": ["王星越", "Wang Xingyue"]
        },

        {
            "displayName": "王子奇",
            "wiki": { "lang": "zh", "title": "王子奇" },
            "answers": ["王子奇", "Wang Ziqi"]
        },

        {
            "displayName": "周翊然",
            "wiki": { "lang": "zh", "title": "周翊然" },
            "answers": ["周翊然", "Zhou Yiran"]
        },

        {
            "displayName": "敖瑞鹏",
            "wiki": { "lang": "zh", "title": "敖瑞鹏" },
            "answers": ["敖瑞鹏", "Ao Ruipeng"]
        },

        {
            "displayName": "孙泽源",
            "wiki": { "lang": "zh", "title": "孙泽源" },
            "answers": ["孙泽源", "Sun Zeyuan"]
        },

        {
            "displayName": "何与",
            "wiki": { "lang": "zh", "title": "何与" },
            "answers": ["何与", "He Yu"]
        },

        {
            "displayName": "陈靖可",
            "wiki": { "lang": "zh", "title": "陈靖可" },
            "answers": ["陈靖可", "Chen Jingke"]
        },

        {
            "displayName": "郭子凡",
            "wiki": { "lang": "zh", "title": "郭子凡" },
            "answers": ["郭子凡", "Guo Zifan"]
        },

        {
            "displayName": "戴景耀",
            "wiki": { "lang": "zh", "title": "戴景耀" },
            "answers": ["戴景耀", "Dai Jingyao"]
        },

        {
            "displayName": "周锐",
            "wiki": { "lang": "zh", "title": "周锐" },
            "answers": ["周锐", "Zhou Rui"]
        },

        {
            "displayName": "钱正昊",
            "wiki": { "lang": "zh", "title": "钱正昊" },
            "answers": ["钱正昊", "Qian Zhenghao"]
        },

        {
            "displayName": "李鑫一",
            "wiki": { "lang": "zh", "title": "李鑫一" },
            "answers": ["李鑫一", "Li Xinyi"]
        },

        {
            "displayName": "王晨艺",
            "wiki": { "lang": "zh", "title": "王晨艺" },
            "answers": ["王晨艺", "Wang Chenyi"]
        },

        {
            "displayName": "尚九熙",
            "wiki": { "lang": "zh", "title": "尚九熙" },
            "answers": ["尚九熙", "Shang Jiuxi"]
        },

        {
            "displayName": "张逸杰",
            "wiki": { "lang": "zh", "title": "张逸杰" },
            "answers": ["张逸杰", "Zhang Yijie"]
        },

        {
            "displayName": "马思超",
            "wiki": { "lang": "zh", "title": "马思超" },
            "answers": ["马思超", "Ma Sichao"]
        },

        {
            "displayName": "邓为",
            "wiki": { "lang": "zh", "title": "邓为" },
            "answers": ["邓为", "Deng Wei"]
        },

        {
            "displayName": "何昶希",
            "wiki": { "lang": "zh", "title": "何昶希" },
            "answers": ["何昶希", "He Changxi"]
        },

        {
            "displayName": "周峻纬",
            "wiki": { "lang": "zh", "title": "周峻纬" },
            "answers": ["周峻纬", "Zhou Junwei"]
        },

        {
            "displayName": "秦霄贤",
            "wiki": { "lang": "zh", "title": "秦霄贤" },
            "answers": ["秦霄贤", "Qin Xiaoxian"]
        },

        {
            "displayName": "周政杰",
            "wiki": { "lang": "zh", "title": "周政杰" },
            "answers": ["周政杰", "Zhou Zhengjie"]
        },

        {
            "displayName": "谢兴阳",
            "wiki": { "lang": "zh", "title": "谢兴阳" },
            "answers": ["谢兴阳", "Xie Xingyang"]
        },

        {
            "displayName": "张星特",
            "wiki": { "lang": "zh", "title": "张星特" },
            "answers": ["张星特", "Zhang Xingte"]
        },

        {
            "displayName": "孙滢皓",
            "wiki": { "lang": "zh", "title": "孙滢皓" },
            "answers": ["孙滢皓", "Sun Yinghao"]
        },

        {
            "displayName": "余景天",
            "wiki": { "lang": "zh", "title": "余景天" },
            "answers": ["余景天", "Yu Jingtian"]
        },

        {
            "displayName": "连淮伟",
            "wiki": { "lang": "zh", "title": "连淮伟" },
            "answers": ["连淮伟", "Lian Huaiwei"]
        },

        {
            "displayName": "段星星",
            "wiki": { "lang": "zh", "title": "段星星" },
            "answers": ["段星星", "Duan Xingxing"]
        },

        {
            "displayName": "徐子未",
            "wiki": { "lang": "zh", "title": "徐子未" },
            "answers": ["徐子未", "Xu Ziwei"]
        },

        {
            "displayName": "王南钧",
            "wiki": { "lang": "zh", "title": "王南钧" },
            "answers": ["王南钧", "Wang Nanjun"]
        },

        {
            "displayName": "姚琛",
            "wiki": { "lang": "zh", "title": "姚琛" },
            "answers": ["姚琛", "Yao Chen"]
        },

        {
            "displayName": "汪卓成",
            "wiki": { "lang": "zh", "title": "汪卓成" },
            "answers": ["汪卓成", "Wang Zhuocheng"]
        },

        {
            "displayName": "李明德",
            "wiki": { "lang": "zh", "title": "李明德" },
            "answers": ["李明德", "Li Mingde"]
        },

        {
            "displayName": "翟子路",
            "wiki": { "lang": "zh", "title": "翟子路" },
            "answers": ["翟子路", "Zhai Zilu"]
        },

        {
            "displayName": "樊治欣",
            "wiki": { "lang": "zh", "title": "樊治欣" },
            "answers": ["樊治欣", "Fan Zhixin"]
        },

        {
            "displayName": "许凯",
            "wiki": { "lang": "zh", "title": "许凯" },
            "answers": ["许凯", "Xu Kai"]
        },

        {
            "displayName": "丁禹兮",
            "wiki": { "lang": "zh", "title": "丁禹兮" },
            "answers": ["丁禹兮", "Ding Yuxi"]
        },

        {
            "displayName": "张新成",
            "wiki": { "lang": "zh", "title": "张新成" },
            "answers": ["张新成", "Steven Zhang", "Zhang Xincheng"]
        },

        {
            "displayName": "林彦俊",
            "wiki": { "lang": "zh", "title": "林彦俊" },
            "answers": ["林彦俊", "Lin Yanjun"]
        },

        {
            "displayName": "张铭恩",
            "wiki": { "lang": "zh", "title": "张铭恩" },
            "answers": ["张铭恩", "Zhang Mingen"]
        },

        {
            "displayName": "郑锐彬",
            "wiki": { "lang": "zh", "title": "郑锐彬" },
            "answers": ["郑锐彬", "Zheng Ruibin"]
        },

        {
            "displayName": "陈哲远",
            "wiki": { "lang": "zh", "title": "陈哲远" },
            "answers": ["陈哲远", "Chen Zheyuan"]
        },

        {
            "displayName": "陈星旭",
            "wiki": { "lang": "zh", "title": "陈星旭" },
            "answers": ["陈星旭", "Chen Xingxu"]
        },

        {
            "displayName": "朱正廷",
            "wiki": { "lang": "zh", "title": "朱正廷" },
            "answers": ["朱正廷", "Zhu Zhengting"]
        },

        {
            "displayName": "王子异",
            "wiki": { "lang": "zh", "title": "王子异" },
            "answers": ["王子异", "Wang Ziyi"]
        },

        {
            "displayName": "郭麒麟",
            "wiki": { "lang": "zh", "title": "郭麒麟" },
            "answers": ["郭麒麟", "Guo Qilin"]
        },

        {
            "displayName": "卜凡",
            "wiki": { "lang": "zh", "title": "卜凡" },
            "answers": ["卜凡", "Bo Fan"]
        },

        {
            "displayName": "王一博",
            "wiki": { "lang": "zh", "title": "王一博" },
            "answers": ["王一博", "Wang Yibo"]
        },

        {
            "displayName": "张凌赫",
            "wiki": { "lang": "zh", "title": "张凌赫" },
            "answers": ["张凌赫", "Zhang Linghe"]
        },

        {
            "displayName": "侯明昊",
            "wiki": { "lang": "zh", "title": "侯明昊" },
            "answers": ["侯明昊", "Neo Hou"]
        },

        {
            "displayName": "刘昊然",
            "wiki": { "lang": "zh", "title": "刘昊然" },
            "answers": ["刘昊然", "Liu Haoran", "Turbo Liu"]
        },

        {
            "displayName": "邢昭林",
            "wiki": { "lang": "zh", "title": "邢昭林" },
            "answers": ["邢昭林", "Xing Zhaolin"]
        },

        {
            "displayName": "曾舜晞",
            "wiki": { "lang": "zh", "title": "曾舜晞" },
            "answers": ["曾舜晞", "Joseph Zeng", "Zeng Shunxi"]
        },

        {
            "displayName": "郭俊辰",
            "wiki": { "lang": "zh", "title": "郭俊辰" },
            "answers": ["郭俊辰", "Guo Junchen"]
        },

        {
            "displayName": "王鹤棣",
            "wiki": { "lang": "zh", "title": "王鹤棣" },
            "answers": ["王鹤棣", "Wang Hedi", "Dylan Wang"]
        },

        {
            "displayName": "王安宇",
            "wiki": { "lang": "zh", "title": "王安宇" },
            "answers": ["王安宇", "Wang Anyu"]
        },

        {
            "displayName": "蔡徐坤",
            "wiki": { "lang": "zh", "title": "蔡徐坤" },
            "answers": ["蔡徐坤", "Cai Xukun", "Kun"]
        },

        {
            "displayName": "李宏毅",
            "wiki": { "lang": "zh", "title": "李宏毅" },
            "answers": ["李宏毅", "Li Hongyi"]
        },

        {
            "displayName": "吴磊",
            "wiki": { "lang": "zh", "title": "吴磊_(演员)" },
            "answers": ["吴磊", "Leo Wu", "Wu Lei"]
        },

        {
            "displayName": "王俊凯",
            "wiki": { "lang": "zh", "title": "王俊凯" },
            "answers": ["王俊凯", "Karry Wang", "Wang Junkai"]
        },

        {
            "displayName": "宋威龙",
            "wiki": { "lang": "zh", "title": "宋威龙" },
            "answers": ["宋威龙", "Song Weilong"]
        },

        {
            "displayName": "易烊千玺",
            "wiki": { "lang": "zh", "title": "易烊千玺" },
            "answers": ["易烊千玺", "Jackson Yee", "Yiyang Qianxi"]
        },

        {
            "displayName": "王源",
            "wiki": { "lang": "zh", "title": "王源" },
            "answers": ["王源", "Roy Wang", "Wang Yuan"]
        },

        {
            "displayName": "陈飞宇",
            "wiki": { "lang": "zh", "title": "陈飞宇" },
            "answers": ["陈飞宇", "Chen Feiyu", "Arthur Chen"]
        },

        {
            "displayName": "周震南",
            "wiki": { "lang": "zh", "title": "周震南" },
            "answers": ["周震南", "Zhou Zhennan"]
        },

        {
            "displayName": "陈立农",
            "wiki": { "lang": "zh", "title": "陈立农" },
            "answers": ["陈立农", "Chen Linong"]
        },

        {
            "displayName": "胡先煦",
            "wiki": { "lang": "zh", "title": "胡先煦" },
            "answers": ["胡先煦", "Hu Xianxu"]
        },

        {
            "displayName": "夏之光",
            "wiki": { "lang": "zh", "title": "夏之光" },
            "answers": ["夏之光", "Xia Zhiguang"]
        },

        {
            "displayName": "甘望星",
            "wiki": { "lang": "zh", "title": "甘望星" },
            "answers": ["甘望星", "Gan Wangxing"]
        },

        {
            "displayName": "范丞丞",
            "wiki": { "lang": "zh", "title": "范丞丞" },
            "answers": ["范丞丞", "Fan Chengcheng"]
        },

        {
            "displayName": "何洛洛",
            "wiki": { "lang": "zh", "title": "何洛洛" },
            "answers": ["何洛洛", "He Luoluo", "Luo Luo"]
        },

        {
            "displayName": "焉栩嘉",
            "wiki": { "lang": "zh", "title": "焉栩嘉" },
            "answers": ["焉栩嘉", "Yan Xujia"]
        },

        {
            "displayName": "黄明昊",
            "wiki": { "lang": "zh", "title": "黄明昊" },
            "answers": ["黄明昊", "Justin Huang", "Huang Minghao"]
        },

        {
            "displayName": "马嘉祺",
            "wiki": { "lang": "zh", "title": "马嘉祺" },
            "answers": ["马嘉祺", "Ma Jiaqi"]
        },

        {
            "displayName": "丁程鑫",
            "wiki": { "lang": "zh", "title": "丁程鑫" },
            "answers": ["丁程鑫", "Ding Chengxin"]
        },

        {
            "displayName": "张真源",
            "wiki": { "lang": "zh", "title": "张真源" },
            "answers": ["张真源", "Zhang Zhenyuan"]
        },

        {
            "displayName": "宋亚轩",
            "wiki": { "lang": "zh", "title": "宋亚轩" },
            "answers": ["宋亚轩", "Song Yaxuan"]
        },

        {
            "displayName": "严浩翔",
            "wiki": { "lang": "zh", "title": "严浩翔" },
            "answers": ["严浩翔", "Yan Haoxiang"]
        },

        {
            "displayName": "贺峻霖",
            "wiki": { "lang": "zh", "title": "贺峻霖" },
            "answers": ["贺峻霖", "He Junlin"]
        },

        {
            "displayName": "刘耀文",
            "wiki": { "lang": "zh", "title": "刘耀文" },
            "answers": ["刘耀文", "Liu Yaowen"]
        },

        {
            "displayName": "朱元冰",
            "wiki": { "lang": "zh", "title": "朱元冰" },
            "answers": ["朱元冰", "Zhu Yuanbing"]
        },

        {
            "displayName": "牛东文",
            "wiki": { "lang": "zh", "title": "牛东文" },
            "answers": ["牛东文", "Niu Dongwen"]
        },

        {
            "displayName": "官鸿",
            "wiki": { "lang": "zh", "title": "官鸿" },
            "answers": ["官鸿", "Guan Hong", "Darren Chen"]
        },

        {
            "displayName": "俞彬",
            "wiki": { "lang": "zh", "title": "俞彬" },
            "answers": ["俞彬", "Yu Bin"]
        },

        {
            "displayName": "罗正",
            "wiki": { "lang": "zh", "title": "羅正" },
            "answers": ["罗正", "Luo Zheng"]
        },

        {
            "displayName": "李昀锐",
            "wiki": { "lang": "zh", "title": "李昀銳" },
            "answers": ["李昀锐", "Li Yunrui"]
        },

        {
            "displayName": "王以纶",
            "wiki": { "lang": "zh", "title": "王以綸" },
            "answers": ["王以纶", "Wang Yilun", "Riley Wang"]
        },

        {
            "displayName": "李逸男",
            "wiki": { "lang": "zh", "title": "李逸男" },
            "answers": ["李逸男", "Li Yinan"]
        },

        {
            "displayName": "周彦辰",
            "wiki": { "lang": "zh", "title": "周彥辰" },
            "answers": ["周彦辰", "Zhou Yanchen"]
        },

        {
            "displayName": "靖佩瑶",
            "wiki": { "lang": "zh", "title": "靖佩瑤" },
            "answers": ["靖佩瑶", "Jing Peiyao"]
        },

        {
            "displayName": "董岩磊",
            "wiki": { "lang": "zh", "title": "董岩磊" },
            "answers": ["董岩磊", "Dong Yanlei"]
        },

        {
            "displayName": "蒙恩",
            "wiki": { "lang": "zh", "title": "蒙恩" },
            "answers": ["蒙恩", "Meng En"]
        },

        {
            "displayName": "费启鸣",
            "wiki": { "lang": "zh", "title": "费启鸣" },
            "answers": ["费启鸣", "Fei Qiming"]
        },

        {
            "displayName": "车慧轩",
            "wiki": { "lang": "zh", "title": "车慧轩" },
            "answers": ["车慧轩", "Che Huixuan"]
        },

        {
            "displayName": "左溢",
            "wiki": { "lang": "zh", "title": "RTA_(组合)" },
            "answers": ["左溢", "Zuo Yi"]
        },

        {
            "displayName": "邓超元",
            "wiki": { "lang": "zh", "title": "邓超元" },
            "answers": ["邓超元", "Deng Chaoyuan"]
        },

        {
            "displayName": "张炯敏",
            "wiki": { "lang": "zh", "title": "张炯敏" },
            "answers": ["张炯敏", "Zhang Jiongmin"]
        },

        {
            "displayName": "谷蓝帝",
            "wiki": { "lang": "zh", "title": "谷蓝帝" },
            "answers": ["谷蓝帝", "Gu Landi", "BlueLan"]
        },

        {
            "displayName": "师铭泽",
            "wiki": { "lang": "zh", "title": "师銘澤" },
            "answers": ["师铭泽", "Shi Mingze"]
        },

        {
            "displayName": "汪穆清",
            "wiki": { "lang": "zh", "title": "BOYHOOD" },
            "answers": ["汪穆清", "Wang Muqing"]
        },

        {
            "displayName": "隔壁老樊",
            "wiki": { "lang": "zh", "title": "隔壁老樊" },
            "answers": ["隔壁老樊", "Ge Bi Lao Fan", "Gebilaofan"]
        },

        {
            "displayName": "肖德俊",
            "wiki": { "lang": "zh", "title": "肖俊_(NCT)" },
            "answers": ["肖德俊", "Xiao Dejun", "Xiaojun"]
        },

        {
            "displayName": "娄滋博",
            "wiki": { "lang": "zh", "title": "娄滋博" },
            "answers": ["娄滋博", "Lou Zibo"]
        },

        {
            "displayName": "魏子越",
            "wiki": { "lang": "zh", "title": "魏子越" },
            "answers": ["魏子越", "Wei Ziyue"]
        },

        {
            "displayName": "施展",
            "wiki": { "lang": "zh", "title": "施展" },
            "answers": ["施展", "Shi Zhan"]
        },

        {
            "displayName": "冯俊杰",
            "wiki": { "lang": "zh", "title": "冯俊杰" },
            "answers": ["冯俊杰", "Feng Junjie"]
        },

        {
            "displayName": "吾木提",
            "wiki": { "lang": "zh", "title": "XLOV" },
            "answers": ["吾木提", "Wu Muti"]
        },

        {
            "displayName": "孟子坤",
            "wiki": { "lang": "zh", "title": "孟子坤" },
            "answers": ["孟子坤", "Meng Zikun"]
        },

        {
            "displayName": "张康乐",
            "wiki": { "lang": "zh", "title": "张康乐" },
            "answers": ["张康乐", "Zhang Kangle"]
        },

        {
            "displayName": "梓渝",
            "wiki": { "lang": "zh", "title": "梓渝" },
            "answers": ["梓渝", "Zi Yu", "Ziyu"]
        },

        {
            "displayName": "高茂桐",
            "wiki": { "lang": "zh", "title": "TANGRAM" },
            "answers": ["高茂桐", "Gao Maotong"]
        },

        {
            "displayName": "石凯",
            "wiki": { "lang": "zh", "title": "石凯" },
            "answers": ["石凯", "Shi Kai"]
        },

        {
            "displayName": "赖冠霖",
            "wiki": { "lang": "zh", "title": "賴冠霖" },
            "answers": ["赖冠霖", "Lai Guanlin", "Lai Kuanlin"]
        },

        {
            "displayName": "灵超",
            "wiki": { "lang": "zh", "title": "靈超" },
            "answers": ["灵超", "Ling Chao"]
        },

        {
            "displayName": "陈泗旭",
            "wiki": { "lang": "zh", "title": "陈泗旭" },
            "answers": ["陈泗旭", "Chen Sixu"]
        },

        {
            "displayName": "姚景元",
            "wiki": { "lang": "zh", "title": "姚景元" },
            "answers": ["姚景元", "Yao Jingyuan"]
        },

        {
            "displayName": "代昊林",
            "wiki": { "lang": "zh", "title": "代昊林" },
            "answers": ["代昊林", "Dai Haolin"]
        },

        {
            "displayName": "殷志繁",
            "wiki": { "lang": "zh", "title": "殷志繁" },
            "answers": ["殷志繁", "Yin Zhifan"]
        },

        {
            "displayName": "宋文嘉",
            "wiki": { "lang": "zh", "title": "宋文嘉" },
            "answers": ["宋文嘉", "Song Wenjia"]
        },

        {
            "displayName": "李权哲",
            "wiki": { "lang": "zh", "title": "李權哲_(中國大陸歌手)" },
            "answers": ["李权哲", "Li Quanzhe"]
        },

        {
            "displayName": "敖子逸",
            "wiki": { "lang": "zh", "title": "敖子逸" },
            "answers": ["敖子逸", "Ao Ziyi"]
        },

        {
            "displayName": "边程",
            "wiki": { "lang": "zh", "title": "边程" },
            "answers": ["边程", "Bian Cheng"]
        },

        {
            "displayName": "李天泽",
            "wiki": { "lang": "zh", "title": "李天泽" },
            "answers": ["李天泽", "Li Tianze"]
        },

        {
            "displayName": "陈玺达",
            "wiki": { "lang": "zh", "title": "陈玺达" },
            "answers": ["陈玺达", "Chen Xida"]
        },

        {
            "displayName": "朱志鑫",
            "wiki": { "lang": "zh", "title": "朱志鑫" },
            "answers": ["朱志鑫", "Zhu Zhixin"]
        }
    ],
};

const CELEBRITY_LIST = (() => {
    const unique = new Map();
    Object.values(CELEBRITY_POOLS).forEach((pool) => {
        pool.forEach((celeb) => {
            if (!unique.has(celeb.displayName)) {
                unique.set(celeb.displayName, celeb);
            }
        });
    });
    return Array.from(unique.values());
})();

        (() => {
            const startBtn = document.getElementById('startBtn');
            const optionsPanel = document.getElementById('guessPanel');
            const feedback = document.getElementById('feedback');
            const hint = document.getElementById('hint');
            const starImage = document.getElementById('starImage');
            const placeholder = document.getElementById('placeholder');
            const loadingOverlay = document.getElementById('loading');
            const ratingToggle = document.getElementById('ratingToggle');
            const ratingHud = document.getElementById('ratingHud');
            const ratingProgress = document.getElementById('ratingProgress');
            const ratingScore = document.getElementById('ratingScore');
            const ratingControls = document.getElementById('ratingControls');
            const nextQuestionBtn = document.getElementById('nextQuestionBtn');
            const exitRatingBtn = document.getElementById('exitRatingBtn');
            const modeDescription = document.getElementById('modeDescription');
            const mainControls = document.getElementById('mainControls');
            const photoCredit = document.getElementById('photoCredit');
            const defaultDescriptionText = modeDescription ? modeDescription.textContent : '';
            const defaultPlaceholderText = placeholder ? placeholder.textContent : '';
            const defaultHintText = hint ? hint.textContent : '';
            const defaultToggleText = ratingToggle ? ratingToggle.textContent : '';
            const defaultCreditText = photoCredit ? photoCredit.textContent : '';
            const activeToggleText = '答题模式：开';

            const OPTION_COUNT = 4;
            const maxFetchAttempts = 15;

            let optionButtons = [];
            let currentCelebrity = null;
            let lastLoadedIndex = -1;
            let activeCelebrities = CELEBRITY_LIST;
            let autoRetryCount = 0;

            const maxAutoRetries = 3;
            const autoRetryDelayMs = 800;
            const RATING_TOTAL = 10;

            let isRatingMode = false;
            let ratingState = null;

            initOptionButtons();

            if (ratingToggle) {
                ratingToggle.addEventListener('click', () => {
                    if (isRatingMode) {
                        exitRatingMode();
                    } else {
                        startRatingMode();
                    }
                });
            }

            if (exitRatingBtn) {
                exitRatingBtn.addEventListener('click', exitRatingMode);
            }

            if (nextQuestionBtn) {
                nextQuestionBtn.addEventListener('click', handleNextQuestionClick);
            }

            function prepareCelebrityLoad({ hintText, placeholderText } = {}) {
                autoRetryCount = 0;
                currentCelebrity = null;
                feedback.textContent = '';
                feedback.className = 'feedback';
                if (typeof hintText === 'string') {
                    hint.textContent = hintText;
                } else if (defaultHintText) {
                    hint.textContent = defaultHintText;
                }
                if (typeof placeholderText === 'string') {
                    placeholder.textContent = placeholderText;
                }
                placeholder.style.display = 'flex';
                starImage.classList.remove('visible');
                starImage.removeAttribute('src');
                delete starImage.dataset.celebName;
                loadingOverlay.classList.add('active');
                resetPhotoCredit('仅供娱乐');
                disableOptionButtons();
            }

            startBtn.addEventListener('click', () => {
                startBtn.disabled = true;
                startBtn.textContent = '加载中…';
                prepareCelebrityLoad({
                    hintText: '正在为你找照片，请稍候…',
                    placeholderText: '照片加载中…',
                });

                loadRandomCelebrity()
                    .catch((error) => {
                        console.error('加载明星失败', error);
                    })
                    .finally(() => {
                        loadingOverlay.classList.remove('active');
                        startBtn.disabled = false;
                        startBtn.textContent = '换一个';
                    });
            });

            function startRatingMode() {
                if (isRatingMode) {
                    return;
                }
                isRatingMode = true;
                ratingState = {
                    answeredCount: 0,
                    correctCount: 0,
                    awaitingNext: false,
                    completed: false,
                    currentQuestion: 0,
                    usedIndices: new Set(),
                };
                if (ratingToggle) {
                    ratingToggle.setAttribute('aria-pressed', 'true');
                    ratingToggle.textContent = activeToggleText;
                    ratingToggle.disabled = false;
                }
                if (ratingControls) {
                    ratingControls.classList.remove('hidden');
                }
                if (ratingHud) {
                    ratingHud.classList.remove('hidden');
                }
                if (mainControls) {
                    mainControls.classList.add('hidden');
                }
                if (modeDescription) {
                    modeDescription.textContent = '答题模式开启：我们会连续出 10 题且不重复，同样可以随时返回随机模式。';
                }
                nextQuestionBtn.disabled = true;
                nextQuestionBtn.textContent = '下一题';
                feedback.textContent = '';
                feedback.className = 'feedback';
                hint.textContent = '答题模式启动中，正在准备第 1 题…';
                placeholder.style.display = 'flex';
                placeholder.textContent = '照片加载中…';
                updateRatingHud();
                startRatingRound();
            }

            async function startRatingRound() {
                if (!isRatingMode || !ratingState) {
                    return;
                }
                if (ratingState.answeredCount >= RATING_TOTAL) {
                    finishRatingMode();
                    return;
                }

                const questionNumber = ratingState.answeredCount + 1;
                ratingState.currentQuestion = questionNumber;
                ratingState.awaitingNext = false;

                prepareCelebrityLoad({
                    hintText: `答题模式：第 ${questionNumber} / ${RATING_TOTAL} 题加载中…`,
                    placeholderText: '照片加载中…',
                });

                nextQuestionBtn.disabled = true;
                nextQuestionBtn.textContent = '下一题';
                try {
                    await loadRandomCelebrity({ excludeIndices: ratingState.usedIndices });
                } catch (error) {
                    console.error('答题模式加载明星失败', error);
                } finally {
                    loadingOverlay.classList.remove('active');
                }

                if (!isRatingMode) {
                    return;
                }

                if (!currentCelebrity) {
                    feedback.textContent = '这题的图片暂时没抓到，不计入成绩，点击“下一题”换一个。';
                    feedback.className = 'feedback error';
                    hint.textContent = '网络小差了，我们再换一张照片。';
                    ratingState.currentQuestion = ratingState.answeredCount;
                    ratingState.awaitingNext = true;
                    nextQuestionBtn.disabled = false;
                    nextQuestionBtn.textContent = '重新加载';
                    updateRatingHud();
                    return;
                }

                updateRatingHud();
            }

            function handleNextQuestionClick() {
                if (!isRatingMode || !ratingState) {
                    return;
                }

                if (ratingState.completed) {
                    startNewRatingAttempt();
                    return;
                }

                if (!ratingState.awaitingNext) {
                    return;
                }

                nextQuestionBtn.disabled = true;
                startRatingRound();
            }

            function startNewRatingAttempt() {
                if (!isRatingMode) {
                    return;
                }

                ratingState = {
                    answeredCount: 0,
                    correctCount: 0,
                    awaitingNext: false,
                    completed: false,
                    currentQuestion: 0,
                    usedIndices: new Set(),
                };
                nextQuestionBtn.disabled = true;
                nextQuestionBtn.textContent = '下一题';
                feedback.textContent = '';
                feedback.className = 'feedback';
                hint.textContent = '新一轮答题模式开始，正在准备第 1 题…';
                placeholder.style.display = 'flex';
                placeholder.textContent = '照片加载中…';
                updateRatingHud();
                startRatingRound();
            }

            function finishRatingMode() {
                if (!ratingState) {
                    return;
                }
                ratingState.completed = true;
                ratingState.awaitingNext = true;
                ratingState.currentQuestion = RATING_TOTAL;

                const score = Math.round((ratingState.correctCount / RATING_TOTAL) * 100);
                const comment = computeRatingComment(score);

                feedback.textContent = `答题模式完成：答对 ${ratingState.correctCount} / ${RATING_TOTAL} 题，得分 ${score} 分。`;
                feedback.className = 'feedback';
                hint.textContent = comment;
                nextQuestionBtn.disabled = false;
                nextQuestionBtn.textContent = '再来一次';
                updateRatingHud();
            }

            function exitRatingMode() {
                if (!isRatingMode) {
                    return;
                }

                isRatingMode = false;
                ratingState = null;

                if (ratingToggle) {
                    ratingToggle.setAttribute('aria-pressed', 'false');
                    ratingToggle.textContent = defaultToggleText || '答题模式：关';
                    ratingToggle.disabled = false;
                }
                if (ratingControls) {
                    ratingControls.classList.add('hidden');
                }
                if (ratingHud) {
                    ratingHud.classList.add('hidden');
                }
                if (mainControls) {
                    mainControls.classList.remove('hidden');
                }
                if (modeDescription) {
                    modeDescription.textContent = defaultDescriptionText;
                }

                loadingOverlay.classList.remove('active');
                nextQuestionBtn.disabled = true;
                nextQuestionBtn.textContent = '下一题';

                starImage.classList.remove('visible');
                starImage.removeAttribute('src');
                delete starImage.dataset.celebName;

                placeholder.style.display = 'flex';
                placeholder.textContent = defaultPlaceholderText || '还没有加载照片，点击“开始”试试运气～';

                feedback.textContent = '';
                feedback.className = 'feedback';
                hint.textContent = defaultHintText || '从四个选项中选出你认为正确的名字吧！';

                disableOptionButtons();
                updateRatingHud();
            }

            function updateRatingHud() {
                if (!ratingHud) {
                    return;
                }

                if (!isRatingMode || !ratingState) {
                    ratingHud.classList.add('hidden');
                    return;
                }

                ratingHud.classList.remove('hidden');

                const targetQuestion = Math.min(
                    ratingState.currentQuestion || ratingState.answeredCount + 1,
                    RATING_TOTAL
                );

                if (ratingState.completed || ratingState.awaitingNext) {
                    ratingProgress.textContent = `进度：${ratingState.answeredCount} / ${RATING_TOTAL}`;
                } else {
                    ratingProgress.textContent = `第 ${targetQuestion} / ${RATING_TOTAL} 题`;
                }

                ratingScore.textContent = `正确 ${ratingState.correctCount} 题`;
            }

            function computeRatingComment(score) {
                if (score >= 100) {
                    return '满分表现！你就是行走的明星百科～';
                }
                if (score >= 80) {
                    return '很棒的成绩，追星达人认证成功！';
                }
                if (score >= 60) {
                    return '不错哦，再多刷刷图就能更稳啦。';
                }
                if (score >= 40) {
                    return '差一点就及格了，再加把劲～';
                }
                return '没关系，多挑战几次，很快就能记住他们的脸！';
            }

            async function loadRandomCelebrity({ excludeIndices } = {}) {
                const pool = activeCelebrities;

                if (!Array.isArray(pool) || pool.length < OPTION_COUNT) {
                    hint.textContent = '明星数据不足，暂时无法进行游戏。';
                    placeholder.textContent = '数据缺失';
                    return;
                }

                const exclusionSet = excludeIndices instanceof Set ? excludeIndices : null;
                const candidateIndices = pool
                    .map((_, idx) => idx)
                    .filter((idx) => !exclusionSet || !exclusionSet.has(idx));

                if (!candidateIndices.length) {
                    hint.textContent = '题库里的明星都出完啦，稍后再来试试吧～';
                    placeholder.textContent = '没有更多题目';
                    disableOptionButtons();
                    return;
                }

                for (let attempt = 0; attempt < maxFetchAttempts; attempt += 1) {
                    const { celebrity, index } = pickRandomCelebrity(pool, {
                        allowedIndices: candidateIndices,
                        avoidIndex: typeof lastLoadedIndex === 'number' ? lastLoadedIndex : null,
                    });
                    try {
                        const { imageUrl, pageUrl, providerLabel, isLocal } = await fetchCelebrityImage(celebrity);
                        await showCelebrityImage(imageUrl);

                        const safeProviderLabel = providerLabel || '来源';

                        currentCelebrity = {
                            ...celebrity,
                            pageUrl,
                            providerLabel: safeProviderLabel,
                            isLocalAsset: Boolean(isLocal),
                        };
                        lastLoadedIndex = index;
                        autoRetryCount = 0;

                        placeholder.style.display = 'none';
                        populateOptions(index, pool);
                        updatePhotoCredit({ pageUrl, providerLabel: safeProviderLabel });
                        if (isRatingMode && ratingState) {
                            ratingState.usedIndices.add(index);
                        }

                        if (isRatingMode && ratingState) {
                            hint.innerHTML = `答题模式第 ${ratingState.currentQuestion} / ${RATING_TOTAL} 题，请选择正确的名字！`;
                        } else {
                            hint.innerHTML = '图片已加载，快选出正确的名字吧！';
                        }
                        starImage.dataset.celebName = celebrity.displayName;
                        feedback.textContent = '';
                        feedback.className = 'feedback';
                        return;
                    } catch (error) {
                        console.warn('尝试失败，继续寻找其他明星', error);
                    }
                }

                currentCelebrity = null;
                placeholder.style.display = 'flex';
                placeholder.textContent = '暂时没获取到照片，再点“换一个”试试吧～';
                hint.textContent = '服务器可能繁忙，稍等片刻再试一次。';
                disableOptionButtons();
                resetPhotoCredit('仅供娱乐');

                autoRetryCount += 1;

                if (autoRetryCount <= maxAutoRetries) {
                    if (isRatingMode) {
                        hint.textContent = '答题模式：刚才没抓到照片，正在换一张新的…';
                        placeholder.textContent = '正在重新抓取照片…';
                    } else {
                        startBtn.textContent = '自动换一个…';
                        hint.textContent = '刚才没抓到照片，正在自动换一个，别走开～';
                        placeholder.textContent = '没抓到照片，正在自动换一个…';
                    }

                    return new Promise((resolve, reject) => {
                        setTimeout(() => {
                            loadRandomCelebrity({ excludeIndices }).then(resolve).catch(reject);
                        }, autoRetryDelayMs);
                    });
                }

                autoRetryCount = 0;
            }

            function initOptionButtons() {
                optionButtons = [];
                for (let i = 0; i < OPTION_COUNT; i += 1) {
                    const button = document.createElement('button');
                    button.type = 'button';
                    button.className = 'option-button';
                    button.textContent = '等待照片…';
                    button.disabled = true;
                    button.dataset.correct = 'false';
                    button.addEventListener('click', handleOptionClick);
                    optionsPanel.appendChild(button);
                    optionButtons.push(button);
                }
            }

            function disableOptionButtons() {
                optionButtons.forEach((button) => {
                    button.disabled = true;
                    button.dataset.correct = 'false';
                    button.classList.remove('correct', 'incorrect');
                    if (!currentCelebrity) {
                        button.textContent = '等待照片…';
                    }
                });
            }

            function resetPhotoCredit(message) {
                if (!photoCredit) {
                    return;
                }
                photoCredit.textContent = message || defaultCreditText || '仅供娱乐';
            }

            function updatePhotoCredit({ pageUrl, providerLabel } = {}) {
                if (!photoCredit) {
                    return;
                }

                // Always show "仅供娱乐" instead of image source
                photoCredit.textContent = '仅供娱乐';
            }

            function populateOptions(correctIndex, pool) {
                const choiceSet = buildOptionSet(correctIndex, pool);
                choiceSet.forEach((choice, idx) => {
                    const button = optionButtons[idx];
                    button.disabled = false;
                    button.textContent = choice.celeb.displayName;
                    button.dataset.correct = choice.index === correctIndex ? 'true' : 'false';
                    button.classList.remove('correct', 'incorrect');
                });
            }

            function buildOptionSet(correctIndex, pool = activeCelebrities) {
                const indices = new Set([correctIndex]);
                while (indices.size < OPTION_COUNT) {
                    const candidate = Math.floor(Math.random() * pool.length);
                    if (candidate === correctIndex || indices.has(candidate)) {
                        continue;
                    }
                    indices.add(candidate);
                }
                const choices = Array.from(indices).map((index) => ({
                    celeb: pool[index],
                    index,
                }));
                return shuffle(choices);
            }

            function handleOptionClick(event) {
                if (!currentCelebrity) {
                    feedback.textContent = '请先点击“开始”加载照片。';
                    feedback.className = 'feedback error';
                    return;
                }

                const selectedButton = event.currentTarget;
                const isCorrect = selectedButton.dataset.correct === 'true';

                optionButtons.forEach((button) => {
                    button.disabled = true;
                    if (button.dataset.correct === 'true') {
                        button.classList.add('correct');
                    } else if (button === selectedButton) {
                        button.classList.add('incorrect');
                    }
                });

                if (isCorrect) {
                    feedback.textContent = `答对啦！这位是 ${currentCelebrity.displayName}！`;
                    feedback.className = 'feedback success';
                } else {
                    feedback.textContent = '不太对哦，正确答案已经为你标出～';
                    feedback.className = 'feedback error';
                }

                if (isRatingMode && ratingState && !ratingState.awaitingNext) {
                    ratingState.answeredCount += 1;
                    ratingState.currentQuestion = ratingState.answeredCount;
                    if (isCorrect) {
                        ratingState.correctCount += 1;
                    }
                    ratingState.awaitingNext = true;

                    hint.textContent = '答题模式：点击"下一题"继续。';

                    if (ratingState.answeredCount >= RATING_TOTAL) {
                        finishRatingMode();
                    } else {
                        if (nextQuestionBtn) {
                            nextQuestionBtn.disabled = false;
                            nextQuestionBtn.textContent =
                                ratingState.answeredCount === RATING_TOTAL - 1 ? '最后一题' : '下一题';
                        }
                        updateRatingHud();
                    }
                }
            }

            function pickRandomCelebrity(pool = activeCelebrities, { allowedIndices, avoidIndex } = {}) {
                const candidates = Array.isArray(allowedIndices) && allowedIndices.length
                    ? allowedIndices
                    : pool.map((_, idx) => idx);

                if (!candidates.length) {
                    throw new Error('缺少可用的明星');
                }

                let index = candidates[Math.floor(Math.random() * candidates.length)];
                if (typeof avoidIndex === 'number' && candidates.length > 1) {
                    let guard = 0;
                    while (index === avoidIndex && guard < 10) {
                        index = candidates[Math.floor(Math.random() * candidates.length)];
                        guard += 1;
                    }
                }

                return { celebrity: pool[index], index };
            }

            async function fetchCelebrityImage(celebrity) {
                const providers = buildImageProviders(celebrity);

                if (!providers.length) {
                    throw new Error('缺少可用的数据源');
                }

                let lastError = null;

                for (const provider of providers) {
                    try {
                        return await provider();
                    } catch (error) {
                        lastError = error;
                    }
                }

                throw lastError || new Error('未知错误');
            }

            function getAssetKey(celebrity) {
                return (celebrity?.displayName || '').trim();
            }

            function buildLocalAssetProvider(celebrity) {
                const key = getAssetKey(celebrity);
                if (!key) {
                    return null;
                }

                const asset = CELEBRITY_ASSETS[key];
                if (!asset || !asset.path) {
                    return null;
                }

                return () =>
                    Promise.resolve({
                        imageUrl: asset.path,
                        pageUrl: asset.sourceUrl || asset.path,
                        providerLabel: asset.sourceLabel || '本地素材库',
                        isLocal: true,
                    });
            }

            function buildImageProviders(celebrity) {
                const providers = [];

                const localProvider = buildLocalAssetProvider(celebrity);
                if (localProvider) {
                    providers.push(localProvider);
                }

                if (celebrity.wiki?.title && celebrity.wiki?.lang) {
                    providers.push(() => fetchFromWikipedia(celebrity));
                }

                return providers;
            }

            async function fetchFromWikipedia(celebrity) {
                const encodedTitle = encodeURIComponent(celebrity.wiki.title);
                const endpoint = `https://${celebrity.wiki.lang}.wikipedia.org/api/rest_v1/page/summary/${encodedTitle}`;
                const response = await fetch(endpoint, { headers: { Accept: 'application/json' } });

                if (!response.ok) {
                    throw new Error(`Wikipedia HTTP ${response.status}`);
                }

                const payload = await response.json();
                const rawImage = payload?.originalimage?.source || payload?.thumbnail?.source;

                if (!rawImage) {
                    throw new Error('Wikipedia 缺少图片');
                }

                const imageUrl = rawImage.startsWith('http://') ? rawImage.replace('http://', 'https://') : rawImage;
                const pageUrl =
                    payload?.content_urls?.desktop?.page ||
                    payload?.content_urls?.mobile?.page ||
                    `https://${celebrity.wiki.lang}.wikipedia.org/wiki/${encodedTitle}`;

                const providerLabel = `${celebrity.wiki.lang.toUpperCase()} Wikipedia`;

                return { imageUrl, pageUrl, providerLabel };
            }

            function showCelebrityImage(url) {
                return new Promise((resolve, reject) => {
                    starImage.onload = () => {
                        starImage.classList.add('visible');
                        resolve();
                    };
                    starImage.onerror = () => {
                        reject(new Error('图片加载失败'));
                    };
                    starImage.src = url;
                    starImage.alt = '随机流量男明星照片';
                });
            }

            function shuffle(list) {
                const result = [...list];
                for (let i = result.length - 1; i > 0; i -= 1) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [result[i], result[j]] = [result[j], result[i]];
                }
                return result;
            }
        })();
    </script>
</body>
</html>
